(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[718],{176:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>j});var s=a(5155),i=a(2115),n=a(5947),r=a(2619),l=a.n(r),o=a(3648),c=a(7743),d=a(647),u=a(8122),h=a(8372),p=a(8482),m=a(2421);function x(){let t=(0,o._)(["\n  opacity: 0;\n  position: absolute;\n  padding: 10px;\n  border-radius: 3px;\n  background: rgba(0, 0, 0, 0.6);\n  font-size: 14px;\n\n  p {\n    white-space: nowrap;\n    color: #fff;\n    text-align: left;\n  }\n"]);return x=function(){return t},t}let f=d.Ay.div(x());function g(t){var e;let[a,r]=(0,i.useState)(window.innerWidth),[l,o]=(0,i.useState)(a>1e3?800:.9*a),[d,x]=(0,i.useState)(a>1e3?500:350);(0,i.useLayoutEffect)(()=>{r(window.innerWidth)},[]),(0,u.A)(t=>{r(t)});let{data:g}=t,[j,_]=(0,i.useState)(g),b=(0,p.j)(),v=(0,p.G)(t=>t.chartReducer.selectCountries);(0,i.useEffect)(()=>{b((0,h.LT)(j)),_(j)},[b,j]);let w=(0,i.useRef)(null),y=(0,i.useRef)(null),k=null!=(e=c.T9B(j,t=>t.population))?e:0,N=c.m4Y().domain([0,k]).range([.3,1]),L=(0,i.useCallback)(()=>{let t=c.Ltv(w.current),e=c.WH().domain(j.map(t=>t.translations.kor.common)).range([60,l]).padding(.2),s=c.m4Y().domain([0,k]).range([d-10-30,10]).nice(),i=c.l78(e).tickSizeOuter(0);t.select(".x_axis").attr("transform","translate(0, ".concat(d-30,")")).call(i),t.select(".x_axis").selectAll(".tick").attr("width",e.bandwidth());let n=c.V4s(s).ticks(j.length).tickSizeOuter(0);t.select(".y_axis").attr("transform","translate(".concat(60,", ").concat(10,")")).call(n);let r=c.Ltv(y.current);t.selectAll(".bar_group").remove(),t.append("g").attr("class","bar_group").selectAll("rect").data(j).enter().append("rect").attr("class","bar").attr("x",t=>e(t.translations.kor.common)).attr("y",t=>d-30-10-s(t.population)>2?s(t.population)+10:s(t.population)+10-2).attr("width",e.bandwidth()).attr("height",t=>{let e=d-30-10-s(t.population);return e>2?e:2}).style("fill",t=>c._C_(N(t.population))).on("mouseenter",(t,i)=>{a<1e3||(r.html("<p>국가 : ".concat(i.translations.kor.common,"</p><p>인구수 : ").concat(i.population.toLocaleString(),"명</p>")).transition().duration(200).style("opacity",1).style("left","".concat(e(i.translations.kor.common)+e.bandwidth()+5,"px")).style("top","".concat(s(i.population),"px")),c.Ltv(t.target).transition().duration(200).style("opacity",.6))}).on("mouseleave",t=>{a<1e3||(r.style("opacity",0),c.Ltv(t.target).transition().duration(50).style("opacity",1))}).transition().duration(500)},[j,N,k,a,d,l,30,60,10]);return(0,i.useEffect)(()=>{o(a>1e3?800:.9*a),x(a>1e3?500:350),L()},[a,L]),(0,s.jsxs)(n.P.div,{className:"barchart_group",variants:m.V,initial:"hide",animate:"show",custom:1,children:[(0,s.jsxs)("div",{className:"barchart",children:[(0,s.jsxs)("svg",{ref:w,width:l,height:d,children:[(0,s.jsx)("g",{className:"x_axis"}),(0,s.jsx)("g",{className:"y_axis"}),(0,s.jsx)("g",{className:"bar_group"})]}),a>1e3&&(0,s.jsx)(f,{ref:y})]}),(0,s.jsx)("ul",{className:"bar_legend",children:v.length>0&&v.map(t=>(0,s.jsxs)("li",{children:[(0,s.jsx)("svg",{className:"color_table",width:14,height:14,children:(0,s.jsx)("rect",{className:"color_table_rect",width:14,height:14,fill:c._C_(N(t.population))})}),(0,s.jsx)("p",{className:"countries_name",children:t.translations.kor.common})]},t.population))})]})}function j(){let t=(0,p.j)();(0,i.useEffect)(()=>{t((0,h.v)())},[t]);let e=[],a=[],r=(0,p.G)(t=>t.chartReducer.total),o=(0,p.G)(t=>{for(;e.length<7;){let t=Math.floor(Math.random()*r);e.push(t)}return a.length<7&&e.map(e=>a.push(t.chartReducer.countries[e])),a});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.P.h2,{className:"title",variants:m.V,initial:"hide",animate:"show",custom:.2,children:"CHART"}),(0,s.jsxs)(n.P.p,{className:"title_desc",variants:m.V,initial:"hide",animate:"show",custom:.4,children:[r,"개의 국가 중에 ",7,"개 국가를 랜덤으로 데이터를 불러와 인구 수를 그래프로 그렸습니다.",(0,s.jsx)("br",{}),"그래프 바에 마우스를 올리면 정보가 표시됩니다."]}),(0,s.jsxs)(n.P.div,{className:"title_desc skill_point",variants:m.V,initial:"hide",animate:"show",custom:.4,children:[(0,s.jsx)("p",{children:(0,s.jsx)("b",{children:"핵심 기술"})}),(0,s.jsxs)(n.P.ul,{className:"pill_group",variants:m.V,initial:"hide",animate:"show",custom:.6,children:[(0,s.jsx)(n.P.li,{children:"D3.js"}),(0,s.jsx)(n.P.li,{children:"SVG"}),(0,s.jsx)(n.P.li,{children:"반응형"}),(0,s.jsx)(n.P.li,{children:"styled-components"}),(0,s.jsx)(n.P.li,{children:"Redux"}),(0,s.jsx)(n.P.li,{children:"Redux-Toolkit"}),(0,s.jsx)(n.P.li,{children:"Typescript"})]})]}),(0,s.jsxs)(n.P.p,{className:"title_desc",variants:m.V,initial:"hide",animate:"show",custom:.6,children:[(0,s.jsx)("b",{children:"데이터 출저"}),(0,s.jsx)(l(),{href:"https://restcountries.com",target:"_blank",rel:"noopener noreferrer",passHref:!0,className:"link",children:"https://restcountries.com"})]}),(0,s.jsxs)(n.P.p,{className:"title_desc",variants:m.V,initial:"hide",animate:"show",custom:.6,children:[(0,s.jsx)("b",{children:"Github"}),(0,s.jsx)(l(),{href:"https://github.com/kkahub/kkaporfol/blob/main/src/components/chart/bar.tsx",target:"_blank",rel:"noopener noreferrer",passHref:!0,className:"link",children:"코드 소스 보기"})]}),void 0!==o[0]&&(0,s.jsx)(g,{data:o})]})}},2421:(t,e,a)=>{"use strict";a.d(e,{V:()=>s});let s={show:t=>({opacity:1,transition:{delay:.2*t,duration:1}}),hide:{opacity:0,transition:{duration:.1}}}},8122:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var s=a(2115),i=a(3693),n=a.n(i);function r(t){(0,s.useLayoutEffect)(()=>{let e=n()(()=>{t(window.innerWidth)},300);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})}},8372:(t,e,a)=>{"use strict";a.d(e,{LT:()=>o,hq:()=>c,v:()=>n});var s=a(1333),i=a(5125);let n=(0,s.zD)("chart/getCountries",async(t,e)=>{try{let t=await i.A.get("https://restcountries.com/v3.1/all?fields=translations,population");return e.fulfillWithValue(t.data)}catch(t){return e.rejectWithValue(t)}}),r=(0,s.Z0)({name:"chart",initialState:{countries:[],selectCountries:[],total:0,isLoading:"false",error:null},reducers:{setData:(t,e)=>({...t,countries:e.payload}),sortData:(t,e)=>({...t,selectCountries:e.payload})},extraReducers:t=>{t.addCase(n.pending,t=>{t.isLoading="pending"}).addCase(n.fulfilled,(t,e)=>{t.isLoading="fulfilled",t.countries=e.payload,t.total=e.payload.length}).addCase(n.rejected,(t,e)=>{t.isLoading="rejected",t.error=e.error.message})}});r.name;let{setData:l,sortData:o}=r.actions,c=r.reducer},8482:(t,e,a)=>{"use strict";a.d(e,{G:()=>n,j:()=>i});var s=a(1467);let i=()=>(0,s.wA)(),n=s.d4},8628:(t,e,a)=>{Promise.resolve().then(a.bind(a,176))}},t=>{t.O(0,[949,619,543,769,340,441,493,358],()=>t(t.s=8628)),_N_E=t.O()}]);
//# sourceMappingURL=page-e3bb252fdae85f2b.js.map