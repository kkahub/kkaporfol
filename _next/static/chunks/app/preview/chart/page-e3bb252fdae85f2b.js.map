{"version":3,"file":"static/chunks/app/preview/chart/page-e3bb252fdae85f2b.js","mappings":"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","sources":["webpack://_N_E/./src/components/chart/bar.tsx","webpack://_N_E/./src/app/preview/chart/page.tsx","webpack://_N_E/./src/styles/motion.tsx","webpack://_N_E/./src/hooks/useResize.tsx","webpack://_N_E/./src/modules/chartSlice.ts","webpack://_N_E/./src/modules/hooks.ts","webpack://_N_E/?fc8a"],"sourcesContent":["\"use client\";\r\n\r\nimport React, {\r\n  useState,\r\n  useLayoutEffect,\r\n  useRef,\r\n  useEffect,\r\n  useCallback,\r\n} from \"react\";\r\n\r\nimport * as d3 from \"d3\";\r\nimport { motion } from \"framer-motion\";\r\nimport style from \"styled-components\";\r\n\r\nimport { DataProps } from \"@/app/preview/chart/types\";\r\nimport useResize from \"@hooks/useResize\";\r\nimport { sortData } from \"@modules/chartSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"@modules/hooks\";\r\nimport { BasicFade } from \"@styles/motion\";\r\n\r\n// 툴팁  스타일\r\nconst Tooltip = style.div`\r\n  opacity: 0;\r\n  position: absolute;\r\n  padding: 10px;\r\n  border-radius: 3px;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  font-size: 14px;\r\n\r\n  p {\r\n    white-space: nowrap;\r\n    color: #fff;\r\n    text-align: left;\r\n  }\r\n`;\r\n\r\nexport default function BarChart(props: { data: DataProps[] }) {\r\n  // 사이즈 설정\r\n  const margin = { top: 10, right: 0, bottom: 30, left: 60 };\r\n  const [windowSize, setWindowSize] = useState<number>(window.innerWidth);\r\n  const [chartWidth, setChartWidth] = useState<number>(\r\n    windowSize > 1000 ? 800 : windowSize * 0.9,\r\n  );\r\n  const [chartHeight, setChartHeight] = useState<number>(\r\n    windowSize > 1000 ? 500 : 350,\r\n  );\r\n\r\n  useLayoutEffect(() => {\r\n    setWindowSize(window.innerWidth);\r\n  }, []);\r\n\r\n  useResize((w: number) => {\r\n    setWindowSize(w);\r\n  });\r\n\r\n  // 데이터\r\n  const { data } = props;\r\n  const [chartSortData, setChartSortData] = useState(data);\r\n  const dispatch = useAppDispatch();\r\n  const selectCountries = useAppSelector(\r\n    (state) => state.chartReducer.selectCountries,\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch(sortData(chartSortData));\r\n    setChartSortData(chartSortData);\r\n  }, [dispatch, chartSortData]);\r\n\r\n  // 막대 그래프\r\n  const svgRef = useRef(null);\r\n  const tooltipRef = useRef(null);\r\n\r\n  // 컬러 설정\r\n  const xMax: number =\r\n    d3.max(chartSortData, (d) => d.population as number) ?? 0;\r\n  const colorScale = d3.scaleLinear().domain([0, xMax]).range([0.3, 1]);\r\n\r\n  const drawBarChart = useCallback(() => {\r\n    const svg = d3.select(svgRef.current);\r\n\r\n    // X스케일 설정\r\n    const xScale = d3\r\n      .scaleBand()\r\n      .domain(chartSortData.map((d) => d.translations.kor.common))\r\n      .range([margin.left, chartWidth])\r\n      .padding(0.2);\r\n\r\n    // Y스케일 설정\r\n    const yScale = d3\r\n      .scaleLinear()\r\n      .domain([0, xMax])\r\n      .range([chartHeight - margin.top - margin.bottom, margin.top])\r\n      .nice();\r\n\r\n    // Axis 만들기\r\n    const xAxis = d3.axisBottom(xScale).tickSizeOuter(0);\r\n\r\n    svg\r\n      .select<SVGSVGElement>(\".x_axis\")\r\n      .attr(\"transform\", `translate(0, ${chartHeight - margin.bottom})`)\r\n      .call(xAxis);\r\n    svg.select(\".x_axis\").selectAll(\".tick\").attr(\"width\", xScale.bandwidth());\r\n\r\n    const yAxis = d3\r\n      .axisLeft(yScale)\r\n      .ticks(chartSortData.length)\r\n      .tickSizeOuter(0);\r\n\r\n    svg\r\n      .select<SVGSVGElement>(\".y_axis\")\r\n      .attr(\"transform\", `translate(${margin.left}, ${margin.top})`)\r\n      .call(yAxis);\r\n\r\n    // 툴팁\r\n    const tooltip = d3.select(tooltipRef.current);\r\n\r\n    // 막대 그래프 그리기\r\n    svg.selectAll(\".bar_group\").remove();\r\n    svg\r\n      .append<SVGSVGElement>(\"g\")\r\n      .attr(\"class\", \"bar_group\")\r\n      .selectAll(\"rect\")\r\n      .data(chartSortData)\r\n      .enter()\r\n      .append<SVGRectElement>(\"rect\")\r\n      .attr(\"class\", \"bar\")\r\n      .attr(\"x\", (d) => xScale(d.translations.kor.common) as number)\r\n      .attr(\"y\", (d) => {\r\n        const height =\r\n          chartHeight - margin.bottom - margin.top - yScale(d.population);\r\n        return height > 2\r\n          ? yScale(d.population) + margin.top\r\n          : yScale(d.population) + margin.top - 2;\r\n      })\r\n      .attr(\"width\", xScale.bandwidth())\r\n      .attr(\"height\", (d) => {\r\n        const height =\r\n          chartHeight - margin.bottom - margin.top - yScale(d.population);\r\n        return height > 2 ? height : 2;\r\n      })\r\n      .style(\"fill\", (d) => d3.interpolateGnBu(colorScale(d.population)))\r\n      .on(\"mouseenter\", (e, d) => {\r\n        if (windowSize < 1000) return;\r\n        tooltip\r\n          .html(\r\n            `<p>국가 : ${\r\n              d.translations.kor.common\r\n            }</p><p>인구수 : ${d.population.toLocaleString()}명</p>`,\r\n          )\r\n          .transition()\r\n          .duration(200)\r\n          .style(\"opacity\", 1)\r\n          .style(\r\n            \"left\",\r\n            `${\r\n              (xScale(d.translations.kor.common) as number) +\r\n              xScale.bandwidth() +\r\n              5\r\n            }px`,\r\n          )\r\n          .style(\"top\", `${yScale(d.population)}px`);\r\n        d3.select(e.target).transition().duration(200).style(\"opacity\", 0.6);\r\n      })\r\n      .on(\"mouseleave\", (e) => {\r\n        if (windowSize < 1000) return;\r\n        tooltip.style(\"opacity\", 0);\r\n        d3.select(e.target).transition().duration(50).style(\"opacity\", 1);\r\n      })\r\n      .transition()\r\n      .duration(500);\r\n  }, [\r\n    chartSortData,\r\n    colorScale,\r\n    xMax,\r\n    windowSize,\r\n    chartHeight,\r\n    chartWidth,\r\n    margin.bottom,\r\n    margin.left,\r\n    margin.top,\r\n  ]);\r\n  useEffect(() => {\r\n    setChartWidth(windowSize > 1000 ? 800 : windowSize * 0.9);\r\n    setChartHeight(windowSize > 1000 ? 500 : 350);\r\n\r\n    drawBarChart();\r\n  }, [windowSize, drawBarChart]);\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"barchart_group\"\r\n      variants={BasicFade}\r\n      initial=\"hide\"\r\n      animate=\"show\"\r\n      custom={1}\r\n    >\r\n      <div className=\"barchart\">\r\n        {/* 그래프 */}\r\n        <svg ref={svgRef} width={chartWidth} height={chartHeight}>\r\n          <g className=\"x_axis\" />\r\n          <g className=\"y_axis\" />\r\n          <g className=\"bar_group\" />\r\n        </svg>\r\n        {/* // 그래프 */}\r\n\r\n        {/* 툴팁 */}\r\n        {windowSize > 1000 && <Tooltip ref={tooltipRef} />}\r\n        {/* // 툴팁 */}\r\n      </div>\r\n      {/* 레전드 */}\r\n      <ul className=\"bar_legend\">\r\n        {selectCountries.length > 0 &&\r\n          selectCountries.map((item: DataProps) => (\r\n            <li key={item.population}>\r\n              <svg className=\"color_table\" width={14} height={14}>\r\n                <rect\r\n                  className=\"color_table_rect\"\r\n                  width={14}\r\n                  height={14}\r\n                  fill={d3.interpolateGnBu(colorScale(item.population))}\r\n                />\r\n              </svg>\r\n              <p className=\"countries_name\">{item.translations.kor.common}</p>\r\n            </li>\r\n          ))}\r\n      </ul>\r\n      {/* // 레전드 */}\r\n    </motion.div>\r\n  );\r\n}\r\n","\"use client\";\n\nimport React, { useEffect } from \"react\";\n\nimport { motion } from \"framer-motion\";\nimport Link from \"next/link\";\n\nimport BarChart from \"@/components/chart/bar\";\nimport { asyncCountries } from \"@modules/chartSlice\";\nimport { useAppDispatch, useAppSelector } from \"@modules/hooks\";\nimport { BasicFade } from \"@styles/motion\";\n\nimport { DataProps } from \"./types\";\n\nexport default function ChartPage() {\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    dispatch(asyncCountries());\n  }, [dispatch]);\n\n  // 랜덤 국가 선택\n  const countriesSelect: number[] = [];\n  const countriesList: DataProps[] = [];\n  const count = 7;\n  const total = useAppSelector((state) => state.chartReducer.total);\n  const chartData = useAppSelector((state) => {\n    while (countriesSelect.length < count) {\n      const random: number = Math.floor(Math.random() * total);\n      countriesSelect.push(random);\n    }\n    if (countriesList.length < count) {\n      countriesSelect.map((num) =>\n        countriesList.push(state.chartReducer.countries[num]),\n      );\n    }\n    return countriesList;\n  });\n\n  return (\n    <>\n      <motion.h2\n        className=\"title\"\n        variants={BasicFade}\n        initial=\"hide\"\n        animate=\"show\"\n        custom={0.2}\n      >\n        CHART\n      </motion.h2>\n      <motion.p\n        className=\"title_desc\"\n        variants={BasicFade}\n        initial=\"hide\"\n        animate=\"show\"\n        custom={0.4}\n      >\n        {total}개의 국가 중에 {count}개 국가를 랜덤으로 데이터를 불러와 인구\n        수를 그래프로 그렸습니다.\n        <br />\n        그래프 바에 마우스를 올리면 정보가 표시됩니다.\n      </motion.p>\n      <motion.div\n        className=\"title_desc skill_point\"\n        variants={BasicFade}\n        initial=\"hide\"\n        animate=\"show\"\n        custom={0.4}\n      >\n        <p>\n          <b>핵심 기술</b>\n        </p>\n        <motion.ul\n          className=\"pill_group\"\n          variants={BasicFade}\n          initial=\"hide\"\n          animate=\"show\"\n          custom={0.6}\n        >\n          <motion.li>D3.js</motion.li>\n          <motion.li>SVG</motion.li>\n          <motion.li>반응형</motion.li>\n          <motion.li>styled-components</motion.li>\n          <motion.li>Redux</motion.li>\n          <motion.li>Redux-Toolkit</motion.li>\n          <motion.li>Typescript</motion.li>\n        </motion.ul>\n      </motion.div>\n      <motion.p\n        className=\"title_desc\"\n        variants={BasicFade}\n        initial=\"hide\"\n        animate=\"show\"\n        custom={0.6}\n      >\n        <b>데이터 출저</b>\n        <Link\n          href=\"https://restcountries.com\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          passHref\n          className=\"link\"\n        >\n          https://restcountries.com\n        </Link>\n      </motion.p>\n      <motion.p\n        className=\"title_desc\"\n        variants={BasicFade}\n        initial=\"hide\"\n        animate=\"show\"\n        custom={0.6}\n      >\n        <b>Github</b>\n        <Link\n          href=\"https://github.com/kkahub/kkaporfol/blob/main/src/components/chart/bar.tsx\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          passHref\n          className=\"link\"\n        >\n          코드 소스 보기\n        </Link>\n      </motion.p>\n\n      {chartData[0] !== undefined && <BarChart data={chartData} />}\n    </>\n  );\n}\n","\"use client\";\r\n\r\nimport { Variants } from \"framer-motion\";\r\n\r\nconst BasicFade: Variants = {\r\n  show: (i) => {\r\n    const delay = i * 0.2;\r\n    return {\r\n      opacity: 1,\r\n      transition: {\r\n        delay,\r\n        duration: 1,\r\n      },\r\n    };\r\n  },\r\n  hide: {\r\n    opacity: 0,\r\n    transition: {\r\n      duration: 0.1,\r\n    },\r\n  },\r\n};\r\n\r\nconst Draw: Variants = {\r\n  show: (i) => {\r\n    const delay = i;\r\n    return {\r\n      pathLength: 1,\r\n      opacity: 1,\r\n      transition: {\r\n        pathLength: { delay, type: \"spring\", duration: 1.5, bounce: 0 },\r\n        opacity: { delay, duration: 0.01 },\r\n      },\r\n    };\r\n  },\r\n  hide: {\r\n    pathLength: 0,\r\n    opacity: 0,\r\n    transition: {\r\n      delay: 1,\r\n    },\r\n  },\r\n};\r\n\r\nexport { BasicFade, Draw };\r\n","import { useLayoutEffect } from \"react\";\r\n\r\nimport debounce from \"lodash/debounce\";\r\n\r\nexport default function useResize(callback: (w: number) => void) {\r\n  useLayoutEffect(() => {\r\n    const handleResize = debounce(() => {\r\n      const innerW = window.innerWidth;\r\n      callback(innerW);\r\n    }, 300);\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n    };\r\n  });\r\n}\r\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\ninterface CountriesThunk {\n  countries: never[];\n  selectCountries: never[];\n  total: number;\n  isLoading: string;\n  error: string | undefined | null;\n}\n\nconst initialState: CountriesThunk = {\n  countries: [],\n  selectCountries: [],\n  total: 0,\n  isLoading: \"false\",\n  error: null,\n};\n\n// thunk 생성\nexport const asyncCountries = createAsyncThunk(\n  \"chart/getCountries\",\n  async (payload, thunkAPI) => {\n    try {\n      const response = await axios.get(\n        \"https://restcountries.com/v3.1/all?fields=translations,population\",\n      );\n      return thunkAPI.fulfillWithValue(response.data);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error);\n    }\n  },\n);\n\n// 리듀서\nconst chartSlice = createSlice({\n  name: \"chart\",\n  initialState,\n  reducers: {\n    setData: (state, action) => ({\n      ...state,\n      countries: action.payload,\n    }),\n    sortData: (state, action) => ({\n      ...state,\n      selectCountries: action.payload,\n    }),\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(asyncCountries.pending, (state) => {\n        // eslint-disable-next-line no-param-reassign\n        state.isLoading = \"pending\";\n      })\n      .addCase(asyncCountries.fulfilled, (state, action) => {\n        // eslint-disable-next-line no-param-reassign\n        state.isLoading = \"fulfilled\";\n        // eslint-disable-next-line no-param-reassign\n        state.countries = action.payload;\n        // eslint-disable-next-line no-param-reassign\n        state.total = action.payload.length;\n      })\n      .addCase(asyncCountries.rejected, (state, action) => {\n        // eslint-disable-next-line no-param-reassign\n        state.isLoading = \"rejected\";\n        // eslint-disable-next-line no-param-reassign\n        state.error = action.error.message;\n      });\n  },\n});\n\nexport const chart = chartSlice.name;\nexport const { setData, sortData } = chartSlice.actions;\nexport const chartReducer = chartSlice.reducer;\nexport default chartSlice;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport type { RootState, AppDispatch } from \"@modules/store\";\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import(/* webpackMode: \"eager\" */ \"C:\\\\work\\\\study\\\\kkaporfol\\\\src\\\\app\\\\preview\\\\chart\\\\page.tsx\");\n"],"names":["Tooltip","style","div","BarChart","props","d3","windowSize","margin","useState","window","innerWidth","chartWidth","setChartWidth","chartHeight","setChartHeight","useLayoutEffect","setWindowSize","useResize","w","data","chartSortData","setChartSortData","dispatch","useAppDispatch","selectCountries","useAppSelector","state","chartReducer","useEffect","sortData","svgRef","useRef","tooltipRef","xMax","d","population","colorScale","domain","range","drawBarChart","useCallback","svg","current","xScale","map","translations","kor","common","padding","yScale","nice","xAxis","top","tickSizeOuter","bottom","select","attr","call","selectAll","bandwidth","yAxis","ticks","length","left","tooltip","remove","append","enter","height","on","e","html","toLocaleString","transition","duration","target","motion","className","variants","BasicFade","initial","animate","custom","ref","width","g","ul","li","rect","fill","item","p","ChartPage","asyncCountries","countriesSelect","countriesList","total","chartData","count","random","Math","floor","push","countries","num","h2","br","b","Link","href","rel","passHref","undefined","show","opacity","delay","i","hide","callback","handleResize","debounce","addEventListener","removeEventListener","createAsyncThunk","payload","thunkAPI","response","axios","get","fulfillWithValue","error","rejectWithValue","createSlice","name","initialState","isLoading","reducers","setData","action","extraReducers","builder","addCase","pending","fulfilled","rejected","message","chartSlice","actions","reducer","useDispatch","useSelector"],"sourceRoot":"","ignoreList":[]}